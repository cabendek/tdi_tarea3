{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/Ingenieria/11vo Semestre/Taller de Integracio\\u0301n/Tarea 3/final_tarea/src/App.js\";\nimport React from \"react\"; //import { Map, Marker, Popup, TileLayer, Polyline } from \"react-leaflet\";\n//import { Icon } from \"leaflet\";\n//import * as parkData from \"./data/skateboard-parks.json\";\n\nimport \"./App.css\";\nimport MapaMundi from \"./Map.js\";\nimport Planes from \"./Planes.js\";\nimport MyForm from \"./Chat.js\"; //import Planes from \"./Planes\"\n\nconst io = require(\"socket.io-client\");\n\nconst socket = io.connect('wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl', {\n  path: '/flights'\n});\ndocument.body.style.backgroundColor = \"rgb(21, 23, 25)\";\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getInfo = e => {\n      e.preventDefault();\n      socket.emit('FLIGHTS', \"\");\n      socket.on('FLIGHTS', message => {\n        console.log(message);\n        this.setState({\n          flights: message\n        });\n      });\n    };\n\n    this.quitInfo = e => {\n      e.preventDefault();\n      this.setState({\n        flights: []\n      });\n    };\n\n    this.state = {\n      flights: [],\n      userName: \"\",\n      isLogged: false,\n      messages: [],\n      position: []\n    };\n  }\n\n  componentDidMount() {\n    socket.on(\"POSITION\", position => {\n      if (this.state.position.some(e => e.code === position.code)) {\n        let new_position = this.state.position.slice();\n        let index = new_position.findIndex(e => e.code === position.code);\n        new_position[index] = position;\n        this.setState({\n          position: new_position\n        });\n      } else this.setState(state => ({\n        position: [...state.position, position]\n      })); //this.state.position.push(position)\n\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"root\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(MapaMundi, {\n      flights: this.state.flights,\n      position: this.state.position,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"information\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(Planes, {\n      getInfo: this.getInfo,\n      quitInfo: this.quitInfo,\n      flights: this.state.flights,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"chat\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(MyForm, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    })));\n  }\n\n}","map":{"version":3,"sources":["/Users/mac/Documents/Ingenieria/11vo Semestre/Taller de IntegracioÌn/Tarea 3/final_tarea/src/App.js"],"names":["React","MapaMundi","Planes","MyForm","io","require","socket","connect","path","document","body","style","backgroundColor","App","Component","constructor","props","getInfo","e","preventDefault","emit","on","message","console","log","setState","flights","quitInfo","state","userName","isLogged","messages","position","componentDidMount","some","code","new_position","slice","index","findIndex","render"],"mappings":"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","sourcesContent":["import React from \"react\";\n//import { Map, Marker, Popup, TileLayer, Polyline } from \"react-leaflet\";\n//import { Icon } from \"leaflet\";\n//import * as parkData from \"./data/skateboard-parks.json\";\nimport \"./App.css\";\nimport MapaMundi from \"./Map.js\"\nimport Planes from \"./Planes.js\";\nimport MyForm from \"./Chat.js\";\n//import Planes from \"./Planes\"\n\nconst io = require(\"socket.io-client\")\nconst socket = io.connect('wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl', {\n    path:'/flights'\n});\ndocument.body.style.backgroundColor=\"rgb(21, 23, 25)\"\n\nexport default class App extends React.Component {\n  \n  constructor(props) {\n    super(props);\n    this.state= {\n      flights: [],\n      userName: \"\",\n      isLogged: false,\n      messages: [],\n      position: []\n    }\n  }\n\n  componentDidMount(){\n    socket.on(\"POSITION\", position => {\n      if(this.state.position.some(e => e.code === position.code)) {\n\n        let new_position = this.state.position.slice()\n        let index = new_position.findIndex(e => e.code === position.code)\n        new_position[index]=position\n        this.setState({ position: new_position })\n\n      } else\n        this.setState((state) => ({ position: [...state.position, position]}))\n        //this.state.position.push(position)\n    })\n   \n  }\n\n  getInfo = (e) => {\n    e.preventDefault();\n    socket.emit('FLIGHTS',\"\");\n    socket.on('FLIGHTS', message => {\n      console.log(message);\n      this.setState({ flights: message })\n    })\n  }\n\n  quitInfo = (e) => {\n    e.preventDefault();\n    this.setState({ flights: []})\n    \n  }\n\n  render () {\n    return(\n      <div className=\"root\">\n        <div>\n          <MapaMundi\n          flights= {this.state.flights}\n          position= {this.state.position}\n          />\n        </div>\n        <div className=\"information\">\n          <Planes\n          getInfo= {this.getInfo}\n          quitInfo= {this.quitInfo}\n          flights= {this.state.flights}\n          />\n        </div>\n        <div className=\"chat\">\n          <MyForm/>\n        </div>\n      </div>\n\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}